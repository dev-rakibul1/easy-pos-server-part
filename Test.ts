// // // sales APIs
// // [
// //   {
// //       "id": "68a78507-d921-44a1-bae9-165be9c75b3d",
// //       "productName": "samsung s25",
// //       "modelName": "S25",
// //       "vats": 5,
// //       "discounts": 0,
// //       "sellingPrice": 120,
// //       "totalSellPrice": 126,
// //       "uniqueId": "SEL-00055",
// //       "quantity": 1,
// //       "purchaseRate": 105,
// //       "variantId": "339288a3-2d45-4f52-8b3a-3a2271b5728d",
// //       "productId": "4a04aee7-8cdc-4f5e-958e-609cbda47e55",
// //       "customerPurchaseProductId": "02470284-3ccb-4367-a19a-906432ae54fa",
// //       "customerPurchaseVariantId": "661f62df-73a3-4a66-9353-7f9f0a889de5",
// //       "userId": "fae855c4-f045-4eaf-a718-4621b81115b9",
// //       "customerId": "f6de3b79-2999-4493-8553-cf487732e0b3",
// //       "createdAt": "2024-07-13T13:53:36.117Z",
// //       "updatedAt": "2024-07-13T13:53:36.117Z",
// //       "customer": {
// //           "id": "f6de3b79-2999-4493-8553-cf487732e0b3",
// //           "firstName": "Sakib",
// //           "middleName": null,
// //           "lastName": "Mia",
// //           "email": "sakib@mia.com",
// //           "phoneNo": "1",
// //           "nid": "5",
// //           "presentAddress": "Dhaka, Bangladesh",
// //           "permanentAddress": "dha",
// //           "profileImage": "/undefinedundefined",
// //           "uniqueId": "C-00006",
// //           "createdAt": "2024-07-06T14:47:36.265Z",
// //           "updatedAt": "2024-07-06T14:47:36.265Z"
// //       },
// //       "user": {
// //           "id": "fae855c4-f045-4eaf-a718-4621b81115b9",
// //           "firstName": "Asif",
// //           "middleName": "",
// //           "lastName": "Islam",
// //           "email": "asif@islam.com",
// //           "phoneNo": "09964888",
// //           "gender": "Male",
// //           "nid": "1234567890123",
// //           "presentAddress": "123 Main St, City, Country",
// //           "permanentAddress": "456 Elm St, City, Country",
// //           "profileImage": "/uploads_/man1.jpg",
// //           "role": "super_admin",
// //           "password": "$2b$12$81f7KB6hcRDpUsau7v8oSem0rPordhSW.ThZh/QqWaz3Ej8yk3Q4G",
// //           "uniqueId": "U-00001",
// //           "createdAt": "2024-07-05T02:24:46.406Z",
// //           "updatedAt": "2024-07-05T02:24:46.406Z"
// //       }
// //   },
// // ],

// // // purchase APIs
// // [
// //   {
// //       "id": "c80a78b1-b223-42e5-b091-04f6c9bb6c84",
// //       "purchaseRate": 100,
// //       "sellingPrice": 120,
// //       "discounts": 0,
// //       "vats": 5,
// //       "totalPrice": 525,
// //       "productStock": 5,
// //       "othersStock": 0,
// //       "color": "",
// //       "uniqueId": "PUR-00017",
// //       "ram": null,
// //       "room": null,
// //       "supplierId": "dd772463-5968-42b2-ba96-dbe7df0fac32",
// //       "userId": "fae855c4-f045-4eaf-a718-4621b81115b9",
// //       "productId": "4a04aee7-8cdc-4f5e-958e-609cbda47e55",
// //       "supplierSellId": "4422ee35-99b5-409b-8e9b-516f6e64d2e8",
// //       "supplierSellProductId": "0a89e520-3900-4a27-9307-8229e3daef6c",
// //       "createdAt": "2024-07-11T04:51:58.183Z",
// //       "updatedAt": "2024-07-11T04:51:58.183Z",
// //       "products": {
// //           "id": "4a04aee7-8cdc-4f5e-958e-609cbda47e55",
// //           "productName": "samsung s25",
// //           "brandName": "Samsung",
// //           "modelName": "S25",
// //           "processor": null,
// //           "unit": "pics",
// //           "category": "Mobile",
// //           "reOrderAlert": 2,
// //           "productImage": "/uploads_/man1.jpg",
// //           "description": null,
// //           "uniqueId": "P-00004",
// //           "productStock": null,
// //           "othersStock": null,
// //           "createdAt": "2024-07-08T05:45:33.872Z",
// //           "updatedAt": "2024-07-08T05:45:33.872Z"
// //       },
// //       "suppliers": {
// //           "id": "dd772463-5968-42b2-ba96-dbe7df0fac32",
// //           "firstName": "GPT",
// //           "middleName": null,
// //           "lastName": "ooo",
// //           "email": "ughs@oo.com",
// //           "phoneNo": "000",
// //           "gender": "male",
// //           "nid": null,
// //           "presentAddress": null,
// //           "permanentAddress": null,
// //           "profileImage": "/undefinedundefined",
// //           "uniqueId": "S-00004",
// //           "status": true,
// //           "createdAt": "2024-07-08T05:47:10.464Z",
// //           "updatedAt": "2024-07-08T05:47:10.464Z"
// //       },
// //       "users": {
// //           "id": "fae855c4-f045-4eaf-a718-4621b81115b9",
// //           "firstName": "Asif",
// //           "middleName": "",
// //           "lastName": "Islam",
// //           "email": "asif@islam.com",
// //           "phoneNo": "09964888",
// //           "gender": "Male",
// //           "nid": "1234567890123",
// //           "presentAddress": "123 Main St, City, Country",
// //           "permanentAddress": "456 Elm St, City, Country",
// //           "profileImage": "/uploads_/man1.jpg",
// //           "role": "super_admin",
// //           "password": "$2b$12$81f7KB6hcRDpUsau7v8oSem0rPordhSW.ThZh/QqWaz3Ej8yk3Q4G",
// //           "uniqueId": "U-00001",
// //           "createdAt": "2024-07-05T02:24:46.406Z",
// //           "updatedAt": "2024-07-05T02:24:46.406Z"
// //       },
// //       "supplierSellProduct": {
// //           "id": "0a89e520-3900-4a27-9307-8229e3daef6c",
// //           "productName": "samsung s25",
// //           "brandName": "Samsung",
// //           "modelName": "S25",
// //           "processor": null,
// //           "unit": "pics",
// //           "category": "Mobile",
// //           "reOrderAlert": 2,
// //           "productImage": "/uploads_/man1.jpg",
// //           "description": null,
// //           "productStock": null,
// //           "othersStock": null,
// //           "purchaseGroupId": "96d21cb8-6e7f-46aa-a29e-8cd6cbaeac75",
// //           "userId": "fae855c4-f045-4eaf-a718-4621b81115b9",
// //           "productId": "4a04aee7-8cdc-4f5e-958e-609cbda47e55",
// //           "supplierId": "dd772463-5968-42b2-ba96-dbe7df0fac32",
// //           "createdAt": "2024-07-08T05:45:33.872Z",
// //           "updatedAt": "2024-07-08T05:45:33.872Z"
// //       },
// //       "supplierSells": {
// //           "id": "4422ee35-99b5-409b-8e9b-516f6e64d2e8",
// //           "quantity": 12,
// //           "totalSellAmounts": 51975,
// //           "totalDue": 46975,
// //           "totalPay": 5000,
// //           "paymentType": "bankPayment",
// //           "supplierId": "dd772463-5968-42b2-ba96-dbe7df0fac32",
// //           "userId": "fae855c4-f045-4eaf-a718-4621b81115b9",
// //           "productId": "f6bf0ae4-1e53-4cef-8d74-2ad0f54a2cd8",
// //           "purchaseGroupId": "96d21cb8-6e7f-46aa-a29e-8cd6cbaeac75",
// //           "createdAt": "2024-07-11T04:51:58.183Z",
// //           "updatedAt": "2024-07-11T04:51:58.183Z"
// //       }
// //   }
// // ],

// // // return APIs
// // [
// //   {
// //       "id": "ca6b481d-97ee-492e-86ac-1e6fdc07f9ac",
// //       "uniqueId": "R-1111111110",
// //       "imeiNumber": "00013",
// //       "ram": "6",
// //       "rom": "256",
// //       "color": "red",
// //       "variantId": "12277303-f90d-43e9-838f-88ac81b65790",
// //       "userId": "fae855c4-f045-4eaf-a718-4621b81115b9",
// //       "productId": "4a04aee7-8cdc-4f5e-958e-609cbda47e55",
// //       "price": 525,
// //       "supplierId": "dd772463-5968-42b2-ba96-dbe7df0fac32",
// //       "userReturnProductsId": "7ec4aba3-c49e-4101-be02-74942fe8bc32",
// //       "createdAt": "2024-07-09T05:49:49.518Z",
// //       "updatedAt": "2024-07-09T05:49:49.518Z",
// //       "supplier": {
// //           "id": "dd772463-5968-42b2-ba96-dbe7df0fac32",
// //           "firstName": "GPT",
// //           "middleName": null,
// //           "lastName": "ooo",
// //           "email": "ughs@oo.com",
// //           "phoneNo": "000",
// //           "gender": "male",
// //           "nid": null,
// //           "presentAddress": null,
// //           "permanentAddress": null,
// //           "profileImage": "/undefinedundefined",
// //           "uniqueId": "S-00004",
// //           "status": true,
// //           "createdAt": "2024-07-08T05:47:10.464Z",
// //           "updatedAt": "2024-07-08T05:47:10.464Z"
// //       }
// //   },
// // ],
// import { NextFunction, Request, Response } from 'express'
// import httpStatus from 'http-status'
// import { Secret } from 'jsonwebtoken'
// import { PAYLOADS } from '../../enums/role'
// import ApiError from '../../errors/apiError'
// import { jwtTokenProvider } from '../../helpers/jwtHelper'
// import prisma from '../../shared/prisma'

// type ITokenObj = {
//   uniqueId: string
//   role: string
//   status: boolean
//   iat: number
//   exp: number
// }

// const Auth =
//   (...requireRole: string[]) =>
//   async (req: Request, res: Response, next: NextFunction) => {
//     try {
//       const token = req.headers.authorization

//       if (!token) {
//         throw new ApiError(httpStatus.UNAUTHORIZED, 'You are not authorized')
//       }

//       // verify token
//       let verifyUser: ITokenObj | null = null

//       try {
//         verifyUser = jwtTokenProvider.verifyJwtToken(
//           token,
//           PAYLOADS.ACCESS_TOKEN as Secret,
//         ) as ITokenObj
//       } catch (error) {
//         throw new ApiError(httpStatus.UNAUTHORIZED, 'Invalid token')
//       }

//       // console.log(verifyUser)

//       function isTokenExpired(token: ITokenObj) {
//         const currentTime = Math.floor(Date.now() / 1000)
//         return currentTime > token.exp
//       }

//       const tokenExpired = isTokenExpired(verifyUser)

//       console.log(tokenExpired)

//       if (tokenExpired) {
//         await prisma.user.update({
//           where: { uniqueId: verifyUser.uniqueId },
//           data: { status: false },
//         })
//         return res.status(httpStatus.UNAUTHORIZED).json({
//           message: 'Token is expired. Please log in again.',
//         })
//       }

//       req.user = verifyUser

//       if (requireRole.length && !requireRole.includes(verifyUser.role)) {
//         throw new ApiError(httpStatus.FORBIDDEN, 'Forbidden user')
//       }

//       next()
//     } catch (error) {
//       next(error)
//     }
//   }

// export const AuthProvider = {
//   Auth,
// }
